# 杠杆交易

!!! Warning "测试功能"
    此功能仍处于测试阶段。如果您发现任何问题，请通过Discord或Github Issue告知我们。

!!! Note "一个账户运行多个机器人"
    您不能在同一个账户上运行2个使用杠杆的机器人。对于杠杆/保证金交易，Freqtrade假设它是该账户的唯一使用者，所有平仓水位均基于此假设计算。

!!! Danger "杠杆交易风险极高"
    不要使用杠杆倍数>1的策略，除非该策略已在现货市场的实盘运行中显示出积极结果。请检查您策略的止损设置。使用2倍杠杆时，0.5（50%）的止损设置过低，这些交易可能在达到止损前就被平仓。
    对于因使用本软件或此模式而造成的任何损失，我们不承担任何责任。

    请仅在您了解Freqtrade（和您的策略）工作原理后再使用高级交易模式。
    此外，永远不要冒险投入超过您能承受损失的资金。

如果您已有现有策略，请阅读[策略迁移指南](strategy_migration.md#strategy-migration-between-v2-and-v3)，将您的策略从Freqtrade v2策略迁移到支持做空和期货交易的v3版本策略。

## 做空

当[`trading_mode`](#杠杆交易模式)设置为`spot`（现货）时，无法进行做空。要进行做空交易，`trading_mode`必须设置为`margin`（当前不可用）或[`futures`](#期货)，同时[`margin_mode`](#保证金模式)设置为`cross`（当前不可用）或[`isolated`](#逐仓保证金模式)。

策略要支持做空，策略类必须设置类变量`can_short = True`。

请阅读[策略自定义](strategy-customization.md#entry-signal-rules)，了解如何设置进入和退出做空交易的信号。

## 理解`trading_mode`

可能的值包括：`spot`（默认）、`margin`（当前不可用）或`futures`（期货）。

### 现货（Spot）

常规交易模式（低风险）

- 仅做多交易（不支持做空）。
- 无杠杆。
- 无平仓风险。
- 盈利/亏损等于资产价值的变化（减去交易费用）。

### 杠杆交易模式

使用杠杆时，交易者从交易所借入资金。必须向交易所全额偿还借入的资金（可能包含利息），交易者保留使用借入资金进行交易所产生的任何利润，或承担任何损失。

由于必须偿还借入资金，当杠杆账户中的资产总价值降至某个点（此时损失总额小于交易者在杠杆账户中实际拥有的保证金价值）时，交易所将**平仓**（强制出售交易者的资产），以确保交易者有足够资金向交易所偿还借入的资产。交易所还会收取**平仓费用**，增加交易者的损失。

因此，**如果您不完全了解自己在做什么，请不要进行杠杆交易。杠杆交易风险极高，可能导致您的资产价值迅速归零，且无法恢复。**

#### 保证金（Margin，当前不可用）

在现货市场进行交易，但交易所按选定的杠杆倍数向您借出货币。您需向交易所偿还借出的金额并支付利息，您的盈利/亏损将乘以指定的杠杆倍数。

#### 期货（Futures）

永续合约（也称为永续期货）是一种以与标的资产价格紧密挂钩的价格进行交易的合约。您交易的不是实际资产，而是衍生品合约。与期货或期权合约不同，永续合约可以无限期持有。

除了期货合约价格变动带来的盈亏外，交易者还需交换_资金费用_，这是根据期货合约与标的资产之间的价格差异计算的盈亏金额。期货合约与标的资产之间的价格差异因交易所而异。

要在期货市场交易，您必须将`trading_mode`设置为"futures"。
您还必须选择"保证金模式"（下文解释）——Freqtrade目前仅支持逐仓保证金。