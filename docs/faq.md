# Freqtrade 常见问题解答 (FAQ)

## 支持的市场

Freqtrade支持现货交易，以及部分选定交易所的（隔离）期货交易。有关支持期货交易的交易所的最新列表，请参考[文档起始页](index.md#supported-futures-exchanges-experimental)。

### 机器人能否开空仓？

Freqtrade可以在期货市场开空仓。
这需要策略为此专门设计，并且配置中设置`"trading_mode": "futures"`。
请确保先阅读[相关文档页面](leverage.md)。

在现货市场中，某些情况下您可以使用杠杆现货代币，这些代币反映反向交易对（例如BTCUP/USD、BTCDOWN/USD、ETHBULL/USD、ETHBEAR/USD等），可通过Freqtrade进行交易。

### 机器人能否交易期权或期货？

部分选定交易所支持期货交易。有关支持期货交易的交易所的最新列表，请参考[文档起始页](index.md#supported-futures-exchanges-experimental)。

## 初学者提示与技巧

* 处理策略和超参数优化文件时，应使用合适的代码编辑器，如VSCode或PyCharm。好的代码编辑器会提供语法高亮和行号，便于查找语法错误（Freqtrade通常会在启动时指出这些错误）。

## Freqtrade 常见问题

### Freqtrade能否同时对同一交易对开多个仓位？

不能。Freqtrade同一时间对每个交易对仅开一个仓位。
不过，您可以使用[`adjust_trade_position()`回调函数](strategy-callbacks.md#adjust-trade-position)调整已开仓位。

回测中提供了`--eps`选项支持此功能——但这仅用于突出显示“隐藏”信号，实盘模式下无效。

### 机器人无法启动

使用`freqtrade trade --config config.json`运行机器人时，输出显示`freqtrade: command not found`。

这可能由以下原因引起：

* 虚拟环境未激活。
  * 运行`source .venv/bin/activate`激活虚拟环境。
* 安装未成功完成。
  * 请查看[安装文档](installation.md)。

### 机器人启动后处于STOPPED模式

请确保在config.json中设置`initial_state`配置选项为`"running"`。

### 我已经等了5分钟，为什么机器人还没有进行任何交易？

* 根据入场策略、白名单币种数量、市场情况等因素，机器人可能需要数小时甚至数天才能找到合适的入场位置。请耐心等待！

* 回测会大致告诉您预期的交易数量——但这不能保证交易在时间上均匀分布——您可能在某一天有20笔交易，而一周中其他时间没有交易。

* 也可能是配置错误。最好检查日志，日志通常会告诉您机器人是只是没有获得买入信号（仅显示心跳消息），还是存在问题（日志中的错误/异常）。

### 我已经进行了12笔交易，为什么总利润是负的？

我理解您的失望，但不幸的是12笔交易太少，无法说明任何问题。运行回测时，您会看到当前算法最终会让您盈利，但这是在数千笔交易之后，即使如此，您在特定币种上仍可能亏损数十甚至数百次。我们当然会不断改进机器人，但交易始终是一种博弈，每月可能会有适度盈利，但仅凭少数几笔交易无法得出结论。

### 我想修改配置，能否不关闭机器人？

可以。您可以编辑配置，然后使用`/reload_config`命令重新加载配置。机器人会停止，重新加载配置和策略，然后使用新配置和策略重启。

### 为什么机器人没有卖出所有买入的资产？

这称为“代币尘埃”，所有交易所都可能出现。
原因是许多交易所从“接收币种”中扣除手续费——例如您买入100个COIN，但实际到账99.9个COIN。
由于COIN以完整的 lot 大小交易（1COIN为单位），您无法卖出0.9个COIN（或99.9个COIN）——必须向下取整为99个COIN。

这不是机器人的问题，手动交易时也会发生。

虽然Freqtrade可以处理（卖出99个COIN），但手续费通常低于最小交易 lot 大小（您只能交易完整的COIN，不能交易0.9个COIN）。
将尘埃（0.9个COIN）留在交易所通常是合理的，因为下次Freqtrade买入COIN时，会使用剩余的小额余额，此时卖出所有买入的资产，从而慢慢减少尘埃余额（尽管很可能永远不会精确到0）。

在可能的情况下（如Binance），使用交易所的专用手续费币种可以解决此问题。
在Binance，只需账户中有BNB，并在个人资料中启用“使用BNB支付手续费”。您的BNB余额会慢慢减少（用于支付手续费）——但您将不再遇到尘埃问题（Freqtrade会将手续费计入利润计算）。
其他交易所不提供此类功能，您只能接受或更换交易所。

### 我向交易所存入了更多资金，但机器人没有识别到

Freqtrade会在必要时（下单前）更新交易所余额。
RPC调用（Telegram的`/balance`、API调用`/balance`）最多每小时触发一次更新。

如果启用了`adjust_trade_position`（且机器人有符合条件的未平仓交易可调整仓位）——钱包将每小时刷新一次。
要强制立即更新，可以使用`/reload_config`——这会重启机器人。

### 我想使用未完成的K线

Freqtrade不会向策略提供未完成的K线。使用未完成的K线会导致指标重绘，从而产生“虚假”买入信号，这些信号无法回测，也无法在事后验证。

您可以通过[数据提供器](strategy-customization.md#orderbookpair-maximum)的订单簿或行情方法使用“当前”市场数据——但这些无法在回测中使用。

### 是否有设置只平仓现有交易而不进行新的入场？

您可以在Telegram中使用`/stopentry`命令阻止未来的交易入场，然后使用`/forceexit all`（卖出所有未平仓交易）。

### 我手动卖出了机器人的资金，现在日志中出现错误

Freqtrade假设其开的交易仅通过机器人管理。  
如果您（意外）卖出了机器人的资金，Freqtrade会尝试通过重新查找交易所订单来恢复。

这是一种尽力而为的方法，并非在所有情况下都有效，尤其是使用Freqtrade不支持的订单类型（OCO、冰山订单等），或处理较旧的交易（交易所不再提供完整订单信息）时。
具体限制因交易所而异——详情通常记录在交易所的API文档中。

### 我想在同一台机器上运行多个机器人

请查看[高级设置文档页面](advanced-setup.md#running-multiple-instances-of-freqtrade)。

### 启动机器人时出现“无法加载策略”错误

当机器人无法加载策略时，会显示此错误消息。
通常，您可以使用`freqtrade list-strategies`列出所有可用策略。  
此命令的输出还包括状态列，显示策略是否可加载。

请检查以下事项：

* 您是否使用了正确的策略名称？策略名称区分大小写，且必须与策略类名对应（不是文件名！）。
* 策略是否位于`user_data/strategies`目录中，且文件扩展名为`.py`？
* 机器人在该错误之前是否显示其他警告？可能您缺少策略的某些依赖项——日志中会突出显示。
* 如果使用docker——策略目录是否正确挂载（检查docker-compose文件的volumes部分）？

### 日志中出现“Missing data fillup”消息

此消息只是警告最近的K线中存在缺失的K线。
根据交易所的不同，这可能表示该交易对在您使用的时间框架内没有交易——交易所仅返回有成交量的K线。
在低成交量交易对上，这是相当常见的情况。

如果所有交易对都出现此消息，可能表示交易所最近宕机。请查看交易所的公共渠道了解详情。

无论原因如何，Freqtrade会用“空”K线填充这些缺失的K线，开盘价、最高价、最低价和收盘价设为前一根K线的收盘价——成交量为空。在图表中，这看起来像`_`——与交易所通常表示0成交量K线的方式一致。

### 出现“Price jump between 2 candles detected”消息

此消息是警告K线之间价格跳升超过30%。
这可能表明该交易对停止交易，且发生了某种代币兑换（例如2021年的COCOS——价格从0.0000154跳升至0.01621）。
此消息通常伴随[“Missing data fillup”](#im-getting-missing-data-fillup-messages-in-the-log)——因为此类交易对的交易通常会停止一段时间。

### 我想重置机器人的数据库

要重置机器人数据库，您可以删除数据库文件（默认是`tradesv3.sqlite`或`tradesv3.dryrun.sqlite`），或通过`--db-url`使用不同的数据库URL（例如`sqlite:///mynewdatabase.sqlite`）。

### 日志中出现“Outdated history for pair xxx”

机器人试图告诉您它获取到的是过时的最后一根K线（不是最后一根完整的K线）。
因此，Freqtrade不会为该交易对入场——因为基于旧信息交易通常不是预期行为。

此警告可能指向以下问题之一：

* 交易所宕机 -> 查看交易所状态页面/博客/Twitter获取详情。
* 系统时间错误 -> 确保系统时间正确。
* 交易量极低的交易对 -> 在交易所网页上查看该交易对，查看您策略使用的时间框架。如果该交易对在某些K线中没有成交量（通常显示为“成交量0”的柱状图，K线为“_”），则该交易对在该时间框架内没有交易。理想情况下应避免此类交易对，因为它们可能导致订单无法成交。
* API问题 -> API返回错误数据（此处仅为完整性考虑，支持的交易所不应出现此问题）。

### 出现“Exchange XXX does not support market orders.”消息，无法运行策略

如消息所示，您的交易所不支持市价订单，而您的[订单类型](configuration.md/#understand-order_types)中有一项设置为“market”。您的策略可能是为其他交易所编写的，将“stoploss”订单设置为“market”，这对大多数支持市价订单的交易所是正确且首选的（但对Gate.io不是）。

要解决此问题，请在策略中将订单类型重新定义为“limit”而非“market”：